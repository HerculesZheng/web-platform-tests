<!DOCTYPE html>
<meta charset="utf-8">
<title>Legacy platform objects [[Set]] method</title>
<link rel="help" href="https://heycam.github.io/webidl/#legacy-platform-object-set">
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<script src="./helper.js"></script>
<script>
    test(function() {
        var element = document.createElement("div");
        element.appendChild(document.createElement("div"));
        element.childNodes["5"] = "foo";
        assert_equals(element.attributes.foo, undefined);
    }, "must be a no-op when setting a numeric property on an object which implements an indexed property getter but not a setter in non strict mode");

    test(function() {
        "use strict";
        var element = document.createElement("div");
        element.appendChild(document.createElement("div"));
        assert_throws(new TypeError(), function() { element.childNodes["5"] = "foo"; });
    }, "must throw when setting a property on an object which implements a indexed property getter but not a setter in strict mode");
    
    test(function() {
        var element = document.createElement("div");
        element.attributes.foo = "foo";
        assert_equals(element.attributes.foo, "foo");
    }, "must allow setting a property on an object which implements a named property getter but not a setter in non strict mode");

    test(function() {
        "use strict";
        var element = document.createElement("div");
        element.attributes.foo = "foo";
        assert_equals(element.attributes.foo, "foo");
    }, "setting a property on an object which implements a named property getter but not a setter must throw in strict mode");
</script>
